---
layout: post
title: io_uring 
author:
  display_name: Barnab√© Geffroy
tags:
- I/O
- io_uring
- epoll
- Rust
- backend
comments: true
---

# `io_uring` : Une nouvelle technologie d'appel syst√®me asynchrone pour les entr√©es/sorties

Alors que la plupart des serveurs sous Linux utilisent le service [`epoll`](https://man7.org/linux/man-pages/man7/epoll.7.html) pour g√©rer les E/S, une nouvelle technologie est en train d'√©merger et promet de se d√©velopper dans les ann√©es √† venir : `io_uring`.

## Fonctionnement 

D√©velopp√© par Jens Axboe depuis 2019, `io_uring` utilise une logique diff√©rentes d'`epoll` pour √©viter le nombre de doublons dans le transit E/S.

Cette technologie est bas√© sur 

![Image : Sch√©ma explicatif du fonctionnement de io_uring]({{ site.url }}/images/io_uring/read_iouring.png)


## √âfficacit√© 

De nombreux benchmarks donnent des r√©sultats impressionants de `io_uring` par rapport √† `epoll`. Comme dans ce tweet : 

<blockquote class="twitter-tweet"><p lang="en" dir="ltr"><a href="https://twitter.com/hashtag/io_uring?src=hash&amp;ref_src=twsrc%5Etfw">#io_uring</a> vs <a href="https://twitter.com/hashtag/epoll?src=hash&amp;ref_src=twsrc%5Etfw">#epoll</a>: simple echo server. io_uring +99% performance, -45% cpu usage. Wow. <a href="https://twitter.com/axboe?ref_src=twsrc%5Etfw">@axboe</a> <a href="https://twitter.com/VincentFree?ref_src=twsrc%5Etfw">@VincentFree</a>. üèÜio_uringüèÜ.<br><br>Try for yourself: <br>io_uring: <a href="https://t.co/XXmXISgLqX">https://t.co/XXmXISgLqX</a><br>epoll: <a href="https://t.co/iSK68lanfX">https://t.co/iSK68lanfX</a> <a href="https://t.co/JFfvdMvpVG">pic.twitter.com/JFfvdMvpVG</a></p>&mdash; frevib (@hielkedv) <a href="https://twitter.com/hielkedv/status/1218891982636027905?ref_src=twsrc%5Etfw">January 19, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

Dans ce benchmark `io_uring` est 45% plus efficace. Cette efficacit√© est due √† sa gestion des E/S beaucoup moins gourmandes qu'`epoll`. En effet, `epoll` va effectuer davantage de copies et surcharger le service par rapport √† `io_uring`. 

## Int√©gration dans le service d'iroco ? 

`io_uring` semble √™tre une technologie prometteuse et beaucoup plus sobre. L'int√©grer dans notre service serait alors un moyen d'en r√©duire davantage l'empreinte √©nerg√©tique. 

Malheureusement cette technologie est encore trop r√©cente et son application √† des cas pr√©cis comme le notre n'est pour le moment pas envi. 

Toutefois, l'√©quipe de d√©veloppeurs de la technologie que nous utilisons, la library Mio Tokyo pour Rust, promet de proposer un service utilisant `io_uring`. Le refactoring sera donc plus simple qu'avec une autre technologie.



